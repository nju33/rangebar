import _Object$create from'babel-runtime/core-js/object/create';import _Object$assign from'babel-runtime/core-js/object/assign';import _typeof from'babel-runtime/helpers/typeof';var Rangebar=function(){'use strict';function a(S,T){return T={exports:{}},S(T,T.exports),T.exports}function b(S,T){T.appendChild(S)}function c(S,T,U){T.insertBefore(S,U)}function d(S){S.parentNode.removeChild(S)}function f(S,T,U){for(var V=U||0;V<S.length;V+=1)S[V].teardown(T)}function g(S){return document.createElement(S)}function h(){return document.createComment('')}function j(S,T,U){S.addEventListener(T,U,!1)}function k(S,T,U){S.removeEventListener(T,U,!1)}function l(S,T,U){S.setAttribute(T,U)}function s(S,T,U,V){for(var W in T)if(W in U){var X=U[W],Y=V[W];if(X!==Y||'object'===('undefined'==typeof X?'undefined':_typeof(X))){var Z=T[W];if(Z)for(var _,$=0;$<Z.length;$+=1)_=Z[$],_.__calling||(_.__calling=!0,_.call(S,X,Y),_.__calling=!1)}}}function t(S,T,U,V){(V||'style'in T&&'object'===_typeof(S.style)||S.style!==U.style)&&(S.buttonSize=T.buttonSize=Q.computed.buttonSize(S.style)),(V||'min'in T&&'object'===_typeof(S.min)||S.min!==U.min||'max'in T&&'object'===_typeof(S.max)||S.max!==U.max)&&(S.range=T.range=Q.computed.range(S.min,S.max))}function u(){var S=g('style');S.textContent='\n[svelte-298887152].bar, [svelte-298887152] .bar {\n  margin: 1em;\n  position: relative;\n  border-radius: 3px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -webkit-box-pack: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n}\n\n[svelte-298887152].button, [svelte-298887152] .button {\n  position: absolute;\n  border-radius: 50%;\n  cursor: pointer;\n}\n\n',b(S,document.head),R=!0}function v(S,T){function U(Y){return Y.style?w:null}var V=h(),W=U(S),X=W&&W(S,T);return{mount:function(Z,$){c(V,Z,$),X&&X.mount(V.parentNode,V)},update:function(Z,$){var aa=W;W=U($),aa===W&&X?X.update(Z,$):(X&&X.teardown(!0),X=W&&W($,T),X&&X.mount(V.parentNode,V))},teardown:function(Z){X&&X.teardown(Z),Z&&d(V)}}}function w(S,T){var U=g('div');l(U,'svelte-298887152',''),T.refs.bar=U,U.className='rangebar bar',U.style.cssText='\n    width: '+(S.horizontal?S.style.len:S.style.width)+';\n    height: '+(S.horizontal?S.style.width:S.style.len)+';\n    background-color: '+S.style.barBackgroundColor+';\n  ';var V=h();b(V,U);for(var W=S.buttons,X=[],Y=0;Y<W.length;Y+=1)X[Y]=x(S,W,W[Y],Y,T),X[Y].mount(V.parentNode,V);return{mount:function($,_){c(U,$,_)},update:function($,_){U.style.cssText='\n    width: '+(_.horizontal?_.style.len:_.style.width)+';\n    height: '+(_.horizontal?_.style.width:_.style.len)+';\n    background-color: '+_.style.barBackgroundColor+';\n  ';for(var ba=_.buttons,ca=0;ca<ba.length;ca+=1)X[ca]?X[ca].update($,_,ba,ba[ca],ca):(X[ca]=x(_,ba,ba[ca],ca,T),X[ca].mount(V.parentNode,V));f(X,!0,ba.length),X.length=ba.length},teardown:function($){T.refs.bar===U&&(T.refs.bar=null),f(X,!1),$&&d(U)}}}function x(S,T,U,V,W){function X(Z){var $=this.__svelte.eachBlock_value,_=this.__svelte.idx,aa=$[_];W.handleMousedown(Z,_)}var Y=g('div');return l(Y,'svelte-298887152',''),Y.className='rangebar button',Y.style.cssText='\n        width: '+S.buttonSize+'px;\n        height: '+S.buttonSize+'px;\n        background-color: '+S.style.buttonBackgroundColor+';\n        '+(S.horizontal&&'left: '+(S.buttonPositions[V]-S.buttonSize/2)+'px')+';\n        '+(S.horizontal||'top: '+(S.buttonPositions[V]-S.buttonSize/2)+'px')+';\n        z-index: '+(S.zIndexes[V]||0)+';\n      ',j(Y,'mousedown',X),Y.__svelte={eachBlock_value:T,idx:V},{mount:function($,_){c(Y,$,_)},update:function($,_,aa,ba,ca){Y.style.cssText='\n        width: '+_.buttonSize+'px;\n        height: '+_.buttonSize+'px;\n        background-color: '+_.style.buttonBackgroundColor+';\n        '+(_.horizontal&&'left: '+(_.buttonPositions[ca]-_.buttonSize/2)+'px')+';\n        '+(_.horizontal||'top: '+(_.buttonPositions[ca]-_.buttonSize/2)+'px')+';\n        z-index: '+(_.zIndexes[ca]||0)+';\n      ',Y.__svelte.eachBlock_value=aa,Y.__svelte.idx=ca},teardown:function($){k(Y,'mousedown',X),$&&d(Y)}}}function y(S){S=S||{},this.refs={},this._state=_Object$assign(Q.data(),S.data),t(this._state,this._state,{},!0),this._observers={pre:_Object$create(null),post:_Object$create(null)},this._handlers=_Object$create(null),this._root=S._root,this._yield=S._yield,this._torndown=!1,R||u(),this._fragment=v(this._state,this),S.target&&this._fragment.mount(S.target,null),S._root?S._root._renderHooks.push({fn:Q.oncreate,context:this}):Q.oncreate.call(this)}for(var A='undefined'==typeof window?'undefined'==typeof global?'undefined'==typeof self?{}:self:global:window,B=a(function(S){(function(){var T,U,V;'undefined'!=typeof performance&&null!==performance&&performance.now?S.exports=function(){return performance.now()}:'undefined'!=typeof process&&null!==process&&process.hrtime?(S.exports=function(){return(T()-V)/1e6},U=process.hrtime,T=function(){var X;return X=U(),1e9*X[0]+X[1]},V=T()):Date.now?(S.exports=function(){return Date.now()-V},V=Date.now()):(S.exports=function(){return new Date().getTime()-V},V=new Date().getTime())}).call(A)}),C=B,D='undefined'==typeof window?A:window,E=['moz','webkit'],F='AnimationFrame',G=D['request'+F],H=D['cancel'+F]||D['cancelRequest'+F],I=0;!G&&I<E.length;I++)G=D[E[I]+'Request'+F],H=D[E[I]+'Cancel'+F]||D[E[I]+'CancelRequest'+F];if(!G||!H){var J=0,K=0,L=[];G=function(T){if(0===L.length){var U=C(),V=Math.max(0,1e3/60-(U-J));J=V+U,setTimeout(function(){var W=L.slice(0);L.length=0;for(var X=0;X<W.length;X++)if(!W[X].cancelled)try{W[X].callback(J)}catch(Y){setTimeout(function(){throw Y},0)}},Math.round(V))}return L.push({handle:++K,callback:T,cancelled:!1}),K},H=function(T){for(var U=0;U<L.length;U++)L[U].handle===T&&(L[U].cancelled=!0)}}var N=function(T){return G.call(D,T)};N.cancel=function(){H.apply(D,arguments)},N.polyfill=function(){D.requestAnimationFrame=G,D.cancelAnimationFrame=H};var Q=function(){return{data:function(){return{defaultStyle:{len:'8em',width:'4px',barBackgroundColor:'#222',buttonBackgroundColor:'#cb1b45'},horizontal:!0,min:0,max:100,active:null,style:null,buttons:null,zIndex:0,zIndexes:[],buttonPositions:[]}},computed:{buttonSize:function(T){function U(W){var X=W.match(/^\d+/);return null===X?null:+X[0]}if((T||{}).width){var V=U(T.width);return 2.414*V}},range:function(T,U){return'number'!=typeof T&&'number'!=typeof U?void 0:U-T}},methods:{handleMousedown:function(T,U){T.preventDefault();var V=this.get(),W=V.active;null!==W||this.set({active:U})},handleMouseup:function(){var T=this.get(),U=T.active,V=T.range,W=T.horizontal,X=T.buttonPositions,Y=T.buttonSize,Z=T.zIndex,$=T.zIndexes,_=T.onChange;if(null!==U){var aa=this.refs.bar[W?'clientWidth':'clientHeight'];'function'==typeof _&&_(X.map(function(ca){var da=Math.round(ca/(aa/V));return da}));var ba=Z+1;$[U]=ba,this.set({active:null,zIndexes:$,zIndex:ba})}},handleMousemove:function(T){var U=this.get(),V=U.active,W=U.range,X=U.horizontal,Y=U.buttonPositions;if(null!==V){var Z=this.refs.bar[X?'clientWidth':'clientHeight'],$=Y[V],_=Y[V-1]||0,aa=Y[V+1]||Z;Y[V]=function(){var ba=$+T[X?'movementX':'movementY'];return ba<_?_:ba>aa?aa:ba}(),this.set({buttonPositions:Y})}}},oncreate:function(){var T=this,U=this.get(),V=U.style,W=U.defaultStyle,X=U.buttons,Y=function(){var $=T.refs.bar,_=T.get(),aa=_.horizontal,ba=_.buttons,ca=_.buttonSize,da=_.zIndex,ea=$[aa?'clientWidth':'clientHeight'],fa=[],ga=ba.map(function(ha,ia){return fa.push(da+ia+1),ea/(100/ha)});T.set({buttonPositions:ga,zIndexes:fa,zIndex:da+ba.length})};if(!Array.isArray(X))throw new Error('Required data `buttons`');else N(Y);null===V&&this.set({style:_Object$assign({},this.defaultStyle)}),this.observe('style',function(Z){var $=T.get(),_=$.defaultStyle;if('undefined'==typeof Z)return void T.set({style:_});if('object'!==('undefined'==typeof Z?'undefined':_typeof(Z))||Array.isArray(Z))throw new Error('`style` must be Object');T.set({style:_Object$assign({},_,Z)})}),this.observe('buttons',function(Z){if(!Array.isArray(Z))throw new Error('`button` must be Array');T.set({buttons:Z}),N(Y)}),document.body.addEventListener('mouseup',this.handleMouseup.bind(this)),document.body.addEventListener('mouseleave',this.handleMouseup.bind(this)),document.body.addEventListener('mousemove',this.handleMousemove.bind(this))},ondestroy:function(){document.body.removeEventListener('mouseup',this.handleMouseup.bind(this)),document.body.removeEventListener('mouseleave',this.handleMouseup.bind(this)),document.body.removeEventListener('mousemove',this.handleMousemove.bind(this))}}}(),R=!1;return y.prototype=Q.methods,y.prototype.get=function(S){return S?this._state[S]:this._state},y.prototype.fire=function(S,T){var U=S in this._handlers&&this._handlers[S].slice();if(U)for(var V=0;V<U.length;V+=1)U[V].call(this,T)},y.prototype.observe=function(S,T,U){var V=U&&U.defer?this._observers.pre:this._observers.post;return(V[S]||(V[S]=[])).push(T),U&&!1===U.init||(T.__calling=!0,T.call(this,this._state[S]),T.__calling=!1),{cancel:function(){var X=V[S].indexOf(T);~X&&V[S].splice(X,1)}}},y.prototype.on=function(S,T){var U=this._handlers[S]||(this._handlers[S]=[]);return U.push(T),{cancel:function(){var W=U.indexOf(T);~W&&U.splice(W,1)}}},y.prototype.set=function(S){this._set(S),(this._root||this)._flush()},y.prototype._flush=function(){if(this._renderHooks)for(;this._renderHooks.length;){var S=this._renderHooks.pop();S.fn.call(S.context)}},y.prototype._set=function(T){var U=this._state;this._state=_Object$assign({},U,T),t(this._state,T,U,!1),s(this,this._observers.pre,T,U),this._fragment&&this._fragment.update(T,this._state),s(this,this._observers.post,T,U)},y.prototype.teardown=y.prototype.destroy=function(T){this.fire('teardown'),Q.ondestroy.call(this),this._fragment.teardown(!1!==T),this._fragment=null,this._state={},this._torndown=!0},y}();
